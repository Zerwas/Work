\section{Boolean Rings}
%intro
\[B:=\left\lbrace 
	\begin{aligned}
		x+y     & \approx y+x,         & x*y     & \approx y*x,     \\
		(x+y)+z & \approx x+(y+z),     & (x*y)*z & \approx x*(y*z), \\
		x+x     & \approx 0,           & x*x     & \approx x,       \\
		0+x     & \approx x,           & 0*x     & \approx 0,       \\
		x*(y+z) & \approx (x*y)+(x*z), & 1*x     & \approx x        
	\end{aligned}
	\right\rbrace \]
	Since $+$ and $*$ are associative we can omit most of the brackets. Furthermore we often write $xy$ instead of $x*y$.
	Lets consider an interpretation of $B$ the two element boolean ring $\BTwo$ with the carrier set $\textbf{2}:=\left\lbrace\bot,\top\right\rbrace$ where $*$ is \textquotedblleft and\textquotedblright\ and $+$ is \textquotedblleft exclusive or\textquotedblright:
	\begin{align*}
		(x+y)^\BTwo & :=\left( x^\BTwo\wedge\neg y^\BTwo\right)  \vee \left( \neg x^\BTwo\wedge y^\BTwo\right) & (x*y)^\BTwo & :=x^\BTwo\wedge y^\BTwo \\
		0^\BTwo     & :=\bot                                                                                      & 1^\BTwo     & :=\top                
	\end{align*}
	% treat 0,1 as ground
	It is easy to see that $\BTwo$ is indeed a model of $B$. Furthermore we can transform a term back from an Boolean algebra into Boolean ring theory:
	\begin{align*}
		x \wedge y & \mapsto x*y     \\
		x\vee y    & \mapsto x+y+x*y \\
		\neg x     & \mapsto x+1
	\end{align*}
	We work with + and * instead of $\vee,\wedge$ and $\neg$ because in Boolean rings we have a very convenient normal form which makes the following proofs easier.\\
	% maybe rephrase
	Lets consider another model of $B$ the powerset interpretation $\PSet$ with the carrier set $2^S$:
	\begin{align*}
		(x+y)^\PSet & :=x^\PSet\Delta y^\PSet & (x*y)^\PSet & :=x^\PSet\cap y^\PSet \\
		0^\PSet     & :=\emptyset             & 1^\PSet     & :=S                   
	\end{align*}
	Where $x\Delta y:=(x\setminus y)\cup(y\setminus x)$ is the symmetric difference of x and y. It is easy to see why $\PSet$ is a model of $B$. Lets just consider distributivity in detail.
	\begin{align*}
		\left( x*\left( y+z\right) \right) ^\PSet & =x^\PSet\cap\left( y^\PSet\Delta z^\PSet\right)                                                                                                                                                \\
		                                          & =x^\PSet\cap\left( \left( y^\PSet\setminus z^\PSet\right) \cup\left( z^\PSet\setminus y^\PSet\right) \right)                                                                                   \\
		                                          & =\left( \left( x^\PSet\cap y^\PSet\right) \setminus z^\PSet\right) \cup\left( \left( x^\PSet\cap z^\PSet\right) \setminus y^\PSet\right)                                                       \\
		                                          & =\left( \left( x^\PSet\cap y^\PSet\right) \setminus \left( x^\PSet\cap z^\PSet\right) \right) \cup\left( \left( x^\PSet\cap z^\PSet\right) \setminus \left( x^\PSet\cap y^\PSet\right) \right) \\
		                                          & =\left( x^\PSet\cap y^\PSet\right) \Delta \left( x^\PSet\cap z^\PSet\right)                                                                                                                    \\
		                                          & =\left( \left( x*y\right) +\left( x*z\right)\right)^\PSet                                                                                                                                      
	\end{align*}
	Here is a less formal explanation for why this identity holds in $\PSet$.\\
	\def\f{1.3}
	\def\CircleX{(\f*0.5,\f*0.866) circle (\f*0.8)}
	\def\CircleY{(\f*0,0) circle (\f*0.8)}
	\def\CircleZ{(\f*1,0) circle (\f*0.8)}
	\begin{tabular*}{\textwidth}{cc}
		\begin{tikzpicture}[fill=gray]
			\begin{scope}
				\clip \CircleY
				\CircleZ;
				\fill \CircleX;
			\end{scope}
			% left hand
			\begin{scope}
				\clip (-2,-1.5) rectangle (3,2.366)
				\CircleZ;
				\fill[pattern=north east lines] \CircleY;
			\end{scope}
			% right hand
			\begin{scope}
				\clip (-2,-1.5) rectangle (3,2.366)
				\CircleY;
				\fill[pattern=north east lines] \CircleZ;
			\end{scope}
			% fill y \cap z white
			\begin{scope}
				\clip \CircleY;
				\fill[white] \CircleZ;
			\end{scope}
			% draw circles
			\draw \CircleX  node [above] {$x^\PSet$}
			\CircleY  node [left] {$y^\PSet$}
			\CircleZ  node [right] {$z^\PSet$}
			(-2,-1.5) rectangle (3,2.366) (-2,2.366) node [below right] {$S$}
			(-2,-1.5) node [below right] {$(x*(y+z))^\PSet$};
		\end{tikzpicture}
		&
		\begin{tikzpicture}[fill=gray]
			\begin{scope}
				\clip \CircleY
				\CircleZ;
				\fill \CircleX;
			\end{scope}
			% fill y \cap z white
			\begin{scope}
				\clip \CircleY;
				\fill[white] \CircleZ;
			\end{scope}
			% fill z /cap x 
			\begin{scope}
				\clip \CircleX;
				\fill[pattern=north west lines] \CircleZ;
			\end{scope}
			% fill y /cap x 
			\begin{scope}
				\clip \CircleX;
				\fill[pattern=north east lines] \CircleY;
			\end{scope}
			% draw circles
			\draw \CircleX  node [above] {$x^\PSet$}
			\CircleY  node [left] {$y^\PSet$}
			\CircleZ  node [right] {$z^\PSet$}
			(-2,-1.5) rectangle (3,2.366) (-2,2.366) node [below right] {$S$}
			(-2,-1.5) node [below right] {$((x*y)+(x*z))^\PSet$};;
		\end{tikzpicture}
	\end{tabular*}
	This small example should just show that there are other models of $B$ with rather common interpretations of + and * apart from $\BTwo$. Note that if $|S|=1$ then $\PSet$ and $\BTwo$ are isomorphic.
	%correct word?
	%TODO we only consider terms over 0,1,+,*
	\subsection{Polynomials}
	\begin{definition}
		A product of distinct variables is a \textbf{monomial} (e.g.$\ xyz$). And a sum of distinct monomials is a \textbf{polynomial} (e.g.$\ x+xy+yz$).
	\end{definition}
	We compare monomials and polynomials modulo commutativity and associativity. So two monomials are distinct iff the sets of variables occurring in them are distinct and two polynomials are distinct iff the sets of their monomials are distinct.
	Here are some examples for clarification:
	\begin{align*}
		yxz & =zyx     & xy+yz & =zy+xy  \\
		yx  & \neq yxz & xy+yz & \neq xy 
	\end{align*}
	Note that we did not introduce a new symbol for equality of polynomials and just use the same as for syntactic equality since it will be clear from the context which one we mean. Now we can transform every term over $\left\lbrace 0,1,+,*\right\rbrace$ 
	%TODO right order?
	 into a (w.r.t. equality of polynomials) unique $\approx_B$-equivalent polynomial, its \textbf{polynomial form}. Since 1 is the neutral element of * we write 1 for the polynomial containing only the empty monomial correspondingly we identify 0 with the empty polynomial. Now the polynomial form can be computed recursively as follows:\\
	\begin{description}
		\item[$x,0,1:$] This is the base case, variables and the constants 0 and 1 are already polynomials.
		\item[$t_1+t_2:$] Let $p_1$ and $p_2$ be the polynomial forms of $t_1$ and $t_2$ the polynomial form of $t_1+t_2$ is obtained by removing all pairs of equivalent monomials from $p_1+p_2$. Since we have $\left\lbrace0+x\approx x,x+x\approx0\right\rbrace\in B$  this rule preserves $\approx_E$-equivalence.
		%explain 0?
		\item[$t_1*t_2:$]  Let $p_1=m_1+\dots+m_k$ and $p_2=n_1+\dots+n_l$ be the polynomial forms of $t_1$ and $t_2$. The polynomial form of $t_1*t_2$ is obtained by removing all pairs of equivalent monomials from $p_1*p_2$ which when multiplied out is the sum
		\begin{align*}
			m_1*n_1+\dots+m_1*n_l+\dots+m_k*n_1+\dots+m_k*n_l 
		\end{align*} 
		where the product of two monomials $m=x_1\dots x_r$ and $n=y_1\dots y_s$ is the monomial obtained by removing repeated occurrences of the same variable from $x_1\dots x_r y_1\dots y_s$. Since we have $\left\lbrace x*x\approx x\right\rbrace\in B$  this rule preserves $\approx_E$-equivalence. Note that if $t_1=1$ then we multiply every monomial in $p_2$ with the empty monomial which does not change anything so the result is as expected just $p_2$.
	\end{description}
	The polynomial form of $t$ is denoted by $t{\downarrow_P}$.
	%t=_B t|P
	%example
	\begin{theorem}\label{basicBR}
		The following statements are equivalent:
		\begin{enumerate}
			\item $\BTwo\models s\approx t,$
			\item $s{\downarrow_P}=t{\downarrow_P},$
			\item $s\approx_B t.$
		\end{enumerate}
	\end{theorem}
	%TODO lemma 4.2 somewhere here
	\begin{proof}\mbox{}
		\begin{description}
			\item[$1\Rightarrow 2$] asd
			\item[$2\Rightarrow 3$] asdf
			\item[$3\Rightarrow 1$] dth
		\end{description}
	\end{proof}
	Lets consider a bigger example $s:=(y+1)(x+y)+(y+1)x$, $t:=0$ and go through 1,2 and 3 from theorem \ref{basicBR}.
	\begin{enumerate}
			\item $\BTwo$ is a model of $s\approx t$.
			\begin{align*}
				s^\BTwo & =\left( \left( y+1\right)\left( x+y\right)+\left( y+1\right)x\right)^\BTwo       \\
				& =\left( s_1^\BTwo\wedge \neg s_2^\BTwo\right)\vee\left( \neg s_1^\BTwo\wedge s_2^\BTwo\right) \\
				&\hspace{8pt}\begin{aligned}
				s_1 & =\left( y+1\right)^\BTwo\wedge\left( x+y\right)^\BTwo & s_2 & =   \left( y+1\right)^\BTwo\wedge x^\BTwo \\
				    & =\neg y^\BTwo\wedge\left( x+y\right)^\BTwo            &     & = \neg y^\BTwo\wedge x^\BTwo              \\
				&=\neg y^\BTwo\wedge\left( \left( x^\BTwo\wedge\neg y^\BTwo\right)\vee\left( \neg x^\BTwo\wedge y^\BTwo\right)\right)\\
				& = x^\BTwo\wedge\neg y^\BTwo
				\end{aligned}\\
				s^\BTwo & =\left( \left( x^\BTwo\wedge\neg y^\BTwo\right)\wedge \neg \left( \neg y^\BTwo\wedge x^\BTwo\right)\right)\vee\left( \neg\left( x^\BTwo\wedge\neg y^\BTwo\right)\wedge \left( \neg y^\BTwo\wedge x^\BTwo\right)\right) \\
				& =\left( x^\BTwo\wedge\left( \neg y^\BTwo\wedge \left( y^\BTwo\vee\neg x^\BTwo\right)\right)\right)\vee\left( \left( \left( \neg x^\BTwo\vee y^\BTwo\right)\wedge \neg y^\BTwo\right)\wedge x^\BTwo\right)              \\
				& =\left( x^\BTwo\wedge\neg y^\BTwo\wedge \neg x^\BTwo\right)\vee\left( \neg x^\BTwo\wedge \neg y^\BTwo\wedge x^\BTwo\right)                                                                                             \\
				& =\bot\vee\bot\\
				& =t^\BTwo 
			\end{align*}
			\item The polynomial forms $s{\downarrow_P}$ and $t{\downarrow_P}$ are equal.
			\begin{align*}
				s & \approx_B (y+1)(x+y)+(y+1)x \\
				  & \approx_B yx+yy+x+y+yx+x    \\
				  & \approx_B yx+yx+y+y+x+x     \\
				  & \approx_B 0
			\end{align*}
			\begin{align*}
				s{\downarrow_P}=0=t{\downarrow_P}
			\end{align*}
			\item $s\approx_B t$ is a consequence of $B$.
			\begin{align*}
				s & \approx_B (y+1)(x+y)+(y+1)x \\
				  & \approx_B (y+1)(x+y+x)      \\
				  & \approx_B y+y               \\
				  & \approx_B 0                 \\
				  & \approx_B t                 
			\end{align*}
		\end{enumerate}
		A nice consequence from theorem \ref{basicBR} is that $\approx_B$ is decidable, because we could just compare the computable polynomial forms, or test semantic equality in $\BTwo$.
		\subsection{Unification}
		Note that until now we have not said anything about unification we just introduced the equational theory $B$, the semantic interpretation $\BTwo$ and showed some properties of the word problem in $\approx_B$.
		%TODO intro
		\begin{lemma}\mbox{}
		\begin{enumerate}
		\item Every solution of $s\approxq t$ in $\BTwo$ can be viewed as a $B$-unifier.
		\item If $s\approxq_B t$ has a $B$-unifier then $s\approxq t$ has a solution in $\BTwo$.
		\end{enumerate}
		\end{lemma}
		%TODO before or after proof? Note that we did not use iff because not every unifier can be viewed as a solution in $\BTwo$. example
		\begin{proof}\mbox{}
		\begin{itemize}
		\item[(1)]Let $\varphi:V\mapsto\textbf{2}$ be a solution of $s\approxq t$ in $\BTwo$ and $\widehat{\varphi}$ the homeomorphic extension of $\varphi$, i.e. $\widehat{\varphi}(s)=\widehat{\varphi}(t)$. From $\varphi$ we now can define a mapping $\phi:V\mapsto \TermSet$ to ground terms in the following way:
		\begin{align*}
		\phi(x):=\begin{cases}
		1 & \text{if }\varphi(x)=\top\\
		0 & \text{if }\varphi(x)=\bot
		\end{cases}
		\end{align*}
		for all $x\in V$. Lets denote the homeomorphic extension of $\phi$ by $\widehat{\phi}$. Let $\psi:\TermSet\mapsto\BTwo$ be an arbitrary homomorphism since $\widehat{\phi}$ is a mapping to ground terms $\psi\widehat{\phi}=\widehat{\varphi}$. So the following
		\begin{align*}
		\psi\left( \widehat{\phi}(s)\right)=\widehat{\varphi}(s)=\widehat{\varphi}(t)=\psi\left( \widehat{\phi}(t)\right) 
		\end{align*}
		holds for all homomorphisms $\psi$ and hence $\BTwo\models\widehat{\phi}(s)\approx\widehat{\phi}(t)$. Theorem \ref{basicBR} yields $\widehat{\phi}(s)\approx_B\widehat{\phi}(t)$, i.e. the mapping $\phi$ (which we got directly from the solution $\varphi$), when viewed as a substitution, is a $B$-unifier.
		%TODO replace phi
		\item[(2)] Let $\sigma$ be a $B$-unifier of $s\approxq_B t$, i.e. $\sigma(s)\approx_B\sigma(t)$. Now theorem \ref{basicBR} yields $\BTwo\models\sigma(s)\approx\sigma(t)$ and hence $\psi\left(\sigma (s)\right)=\psi\left(\sigma (t)\right)$ for all homomorphisms $\psi:\TermSet\mapsto\BTwo$. Hence $\psi\sigma:V\mapsto\textbf{2}$ is a solution in $\BTwo$.
		%TODO ask why \BTwo instead of 2
		\end{itemize}
		\end{proof}